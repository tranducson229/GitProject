<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet" />
  <link rel="stylesheet" href="/Module1/CSS/login.css"/>
  <title>Login Page</title>
    <style>
        .login-error {
            color: #dc3545; /* Màu đỏ */
            font-size: 14px;
            margin-top: -10px;
            margin-bottom: 20px;
            display: none; /* Mặc định ẩn */
        }
    </style>
</head>

<body>
<div class="container">
    <div class="containerContent">
        <h3>Welcome back!</h3>
        <h1>Log In</h1>
        <form id="login-form" action="#">
            <label for="email">Email</label>
            <div class="inputRow">
                <input type="email" id="email" placeholder="Enter your Email" required />
            </div>
            <label for="password">Password</label>
            <div class="inputRow">
                <input type="password" id="password" placeholder="Enter your Password" required />
                <span id="password-eye"><i class="ri-eye-off-line"></i></span>
            </div>
            <p id="login-error" class="login-error">Email hoặc mật khẩu không chính xác.</p>
            <div class="inputFP">
                <a href="#">Forgot Password?</a>
            </div>
            <button type="submit">LOGIN</button>
        </form>
        <h6>Or continue with</h6>
        <div class="logins">
            <a href="#"><img src="Media/search.png" alt="google" /></a>
            <a href="#"><img src="Media/github.png" alt="github" /></a>
            <a href="#"><img src="Media/facebook.png" alt="facebook" /></a>
        </div>
        <p>Don't have an account yet? <a href="signup.html">Sign up</a></p>
    </div>
    <div class="containerImg">
        <img src="Media/1.1.png" alt="header" />
    </div>
</div>
<script>
    // Chức năng ẩn/hiện mật khẩu (giữ nguyên)
    const passwordBtn = document.getElementById("password-eye");
    passwordBtn.addEventListener("click", (e) => {
        const passwordInput = document.getElementById("password");
        const icon = passwordBtn.querySelector("i");
        const isVisible = icon.classList.contains("ri-eye-line");
        passwordInput.type = isVisible ? "password" : "text";
        icon.setAttribute("class", isVisible ? "ri-eye-off-line" : "ri-eye-line");
    });


// LOGIC ĐĂNG NHẬP
// Đảm bảo các biến này tham chiếu đúng các ID đã thêm
const loginForm = document.getElementById('login-form');
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const loginError = document.getElementById('login-error');

// Kiểm tra xem các phần tử cần thiết đã được tìm thấy chưa trước khi thêm sự kiện
if (loginForm && emailInput && passwordInput && loginError) {
    loginForm.addEventListener('submit', function(event) {
        event.preventDefault(); // Ngăn form gửi đi mặc định

        // 1. Lấy dữ liệu đã đăng ký từ Local Storage
        const registeredEmail = localStorage.getItem('registeredEmail');
        const registeredPassword = localStorage.getItem('registeredPassword');

        // 2. Lấy dữ liệu người dùng nhập vào
        const inputEmail = emailInput.value.trim();
        const inputPassword = passwordInput.value.trim();

        // Ẩn thông báo lỗi cũ
        loginError.style.display = 'none';

        // 3. So sánh dữ liệu
        if (inputEmail === registeredEmail && inputPassword === registeredPassword) {
            // ĐĂNG NHẬP THÀNH CÔNG
            alert('Đăng nhập thành công! Chào mừng bạn.');
            
            // Chuyển hướng đến trang chính
            window.location.href = "index.html"; 
        } else {
            // ĐĂNG NHẬP THẤT BẠI
            
            // Kiểm tra xem đã có tài khoản đăng ký chưa
            if (!registeredEmail) {
                alert('Chưa có tài khoản nào được đăng ký. Vui lòng đăng ký trước.');
            }
            
            // Hiển thị thông báo lỗi
            loginError.style.display = 'block';
        }
    });
} else {
    // Thông báo nếu thiếu phần tử HTML
    console.error("Lỗi: Không tìm thấy một hoặc nhiều phần tử HTML cần thiết (login-form, email, password, login-error).");
}
  </script>
</body>

</html>